<!DOCTYPE html>
<html>
<head>
  <title>PDFに線を描画</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
</head>
<body>
  <input type="file" id="fileInput">
  <canvas id="myCanvas"></canvas>
  <button onclick="drawLine()">線を引く</button>
  <button onclick="downloadPDF()">PDFをダウンロード</button>

  <script>
    // ... (先ほどのコードとほぼ同じ)

    let isDrawing = false;
    let startX, startY;

    canvas.addEventListener('mousedown', (event) => {
      isDrawing = true;
      startX = event.clientX - canvas.offsetLeft;
      startY = event.clientY - canvas.offsetTop;
    });

    canvas.addEventListener('mousemove', (event) => {
      if (!isDrawing) return;
      const currentX = event.clientX - canvas.offsetLeft;
      const currentY = event.clientY - canvas.offsetTop;
      ctx.beginPath();
      ctx.moveTo(startX, startY);
      ctx.lineTo(currentX, currentY);
      ctx.stroke();
      startX = currentX;
      startY = currentY;
    });

    canvas.addEventListener('mouseup', () => {
      isDrawing = false;
    });

    function drawLine() {
      // 描画モードにする（この関数は不要になるかも）
    }
  </script>
</body>
</html>
